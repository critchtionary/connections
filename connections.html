<!DOCTYPE html>
<html>
<head>
    <title>Connections</title>
    <style>
        body {
            font-family: Arial, Helvetica, sans-serif;
        }
        .grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            grid-gap: 10px;
        }
        
        .word {
            background-color: #eaeaea;
            padding: 10px;
            text-align: center;
            cursor: pointer;
            user-select: none;
        }
        
        .selected {
            background-color: #2c3e50;
            color: #fff;
        }
        
        .solved[data-category="1"] {
            background-color: #27ae60;
            color: #fff;
        }

        .solved[data-category="2"] {
            background-color: #994cd8;
            color: #fff;
        }

        .solved[data-category="3"] {
            background-color: #d6b41f;
            color: #fff;
        }

        .solved[data-category="4"] {
            background-color: #34cec6;
            color: #fff;
        }
                
    </style>
</head>
<body>
    <div class="grid">
        <div class="word" data-category="1" onclick="handleClick(this)">Word 1</div>
        <div class="word" data-category="1" onclick="handleClick(this)">Word 2</div>
        <div class="word" data-category="1" onclick="handleClick(this)">Word 3</div>
        <div class="word" data-category="1" onclick="handleClick(this)">Word 4</div>
        <div class="word" data-category="2" onclick="handleClick(this)">Word 5</div>
        <div class="word" data-category="2" onclick="handleClick(this)">Word 6</div>
        <div class="word" data-category="2" onclick="handleClick(this)">Word 7</div>
        <div class="word" data-category="2" onclick="handleClick(this)">Word 8</div>
        <div class="word" data-category="3" onclick="handleClick(this)">Word 9</div>
        <div class="word" data-category="3" onclick="handleClick(this)">Word 10</div>
        <div class="word" data-category="3" onclick="handleClick(this)">Word 11</div>
        <div class="word" data-category="3" onclick="handleClick(this)">Word 12</div>
        <div class="word" data-category="4" onclick="handleClick(this)">Word 13</div>
        <div class="word" data-category="4" onclick="handleClick(this)">Word 14</div>
        <div class="word" data-category="4" onclick="handleClick(this)">Word 15</div>
        <div class="word" data-category="4" onclick="handleClick(this)">Word 16</div>
    </div>
    
    <p>Mistakes: <span id="mistakeCounter">0</span></p>
    <button id="submitBtn" disabled="" onclick="submitWords()">Submit</button>
    <p>Elapsed Time: <span id="timer">0</span> seconds</p>

    <script>
        var selectedCount = 0;
        var mistakeCounter = 0;
        var selectedWords = [];
        var startTime;
        var elapsedTime = 0;
        var timerInterval;
        var words = [];
        
        function initializeWords() {
            words = Array.from(document.querySelectorAll('.word'));
            var grid = document.querySelector('.grid');

            shuffle(words);
            
            for (var i = 0; i < words.length; i++) {
                grid.appendChild(words[i]);
            }
        }
        
        function shuffle(array) {
            for (var i = array.length - 1; i > 0; i--) {
                var j = Math.floor(Math.random() * (i + 1));
                var temp = array[i];
                array[i] = array[j];
                array[j] = temp;
            }
        }
        
        function handleClick(element) {
            if (element.classList.contains('solved')) {
                return; // Ignore already solved words
            }
            
            if (element.classList.contains('selected')) {
                element.classList.remove('selected');
                selectedCount--;
                selectedWords = selectedWords.filter(word => word !== element);
                document.getElementById('submitBtn').disabled = true;

            } else if (selectedCount < 4) {
                element.classList.add('selected');
                selectedCount++;
                selectedWords.push(element);
                if (selectedCount === 4) {
                    document.getElementById('submitBtn').disabled = false;
                }
            }
        }
        
        function submitWords() {
            if (selectedCount === 4) {
                var category = selectedWords[0].getAttribute('data-category');
                var sameCategory = selectedWords.every(word => word.getAttribute('data-category') === category);
                if (sameCategory) {
                    for (var i = 0; i < selectedWords.length; i++) {
                        selectedWords[i].classList.remove('selected');
                        selectedWords[i].classList.add('solved');
                    }
                    reorderGrid();
                } else {
                    mistakeCounter++;
                    for (var i = 0; i < selectedWords.length; i++) {
                        selectedWords[i].classList.remove('selected');
                    }
                }
                
                selectedCount = 0;
                selectedWords = [];
                document.getElementById('submitBtn').disabled = true;
                document.getElementById('mistakeCounter').textContent = mistakeCounter;
                
                if (document.querySelectorAll('.solved').length === 16) {
                    stopTimer();
                }
            }
        }
        
        function reorderGrid() {
            var grid = document.querySelector('.grid');
            var solvedWords = document.querySelectorAll('.solved');
            if (solvedWords.length > 0) {
                solvedWords.forEach(word => grid.appendChild(word));
            }
        }
        
        function startTimer() {
            startTime = Date.now();
            timerInterval = setInterval(updateTimer, 1000);
        }
        
        function updateTimer() {
            var currentTime = Date.now();
            elapsedTime = Math.floor((currentTime - startTime) / 1000);
            document.getElementById('timer').textContent = elapsedTime;
        }
        
        function stopTimer() {
            clearInterval(timerInterval);
        }
        
        initializeWords();
        startTimer();
    </script>
</body>
</html>
